{
  "feature": "IMSS Medical Web Application",
  "totalTasks": 58,
  "generatedAt": "2025-11-29T00:00:00Z",
  "tasks": [
    { "id": "T001", "phase": "Phase 0", "title": "Research triage algorithm standards", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": false, "description": "Research 5-question assessment, IMSS protocol comparison and validation method" },
    { "id": "T002", "phase": "Phase 0", "title": "Evaluate Spanish localization libraries and Mexican formatting", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "Compare i18n-js vs alternatives, date/time/currency conventions" },
    { "id": "T003", "phase": "Phase 0", "title": "Document CURP validation rules and integration options", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "Define offline CURP regex and optional external API connector" },
    { "id": "T004", "phase": "Phase 0", "title": "Design appointment scheduling algorithm", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "Greedy assignment algorithm, urgency windows, conflict avoidance" },
    { "id": "T005", "phase": "Phase 0", "title": "Design Redis caching strategy for slots", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "Key patterns, TTL, invalidation and cluster recommendations" },
    { "id": "T006", "phase": "Phase 0", "title": "Research Mexican healthcare compliance and privacy", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "LGPD, IMSS data protection, retention, encryption requirements" },
    { "id": "T007", "phase": "Phase 0", "title": "Establish structured logging and email service strategy", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "JSON logging format, CURP masking, choose SES/SendGrid adapter" },
    { "id": "T008", "phase": "Phase 0", "title": "Document JWT security and authentication best practices", "filePath": "specs/001-imss-medical-app/research.md", "userStory": null, "parallel": true, "description": "Access/refresh tokens, rotation, storage, TLS and CORS guidance" },

    { "id": "T009", "phase": "Phase 1", "title": "Create data model documentation (Postgres schema)", "filePath": "specs/001-imss-medical-app/data-model.md", "userStory": null, "parallel": false, "description": "Define entities and relations: User, Doctor, Appointment, etc." },
    { "id": "T010", "phase": "Phase 1", "title": "Generate Auth API contract (OpenAPI)", "filePath": "specs/001-imss-medical-app/contracts/auth.openapi.yaml", "userStory": null, "parallel": true, "description": "POST /register, /login, /logout, /password-reset schemas" },
    { "id": "T011", "phase": "Phase 1", "title": "Generate Appointments API contract (OpenAPI)", "filePath": "specs/001-imss-medical-app/contracts/appointments.openapi.yaml", "userStory": null, "parallel": true, "description": "GET/POST/PUT /appointments and history endpoints" },
    { "id": "T012", "phase": "Phase 1", "title": "Generate Doctors API contract (OpenAPI)", "filePath": "specs/001-imss-medical-app/contracts/doctors.openapi.yaml", "userStory": null, "parallel": true, "description": "Doctor directory endpoints and availability schemas" },
    { "id": "T013", "phase": "Phase 1", "title": "Generate Triage API contract (OpenAPI)", "filePath": "specs/001-imss-medical-app/contracts/triage.openapi.yaml", "userStory": null, "parallel": true, "description": "POST /triage/assess with 5-question schema and urgency response" },
    { "id": "T014", "phase": "Phase 1", "title": "Generate Requests API contract (OpenAPI)", "filePath": "specs/001-imss-medical-app/contracts/requests.openapi.yaml", "userStory": null, "parallel": true, "description": "Medicine and sick leave request schemas and approval flows" },
    { "id": "T015", "phase": "Phase 1", "title": "Create quickstart guide for local development", "filePath": "specs/001-imss-medical-app/quickstart.md", "userStory": null, "parallel": false, "description": "Install prerequisites and run backend/frontend locally" },
    { "id": "T016", "phase": "Phase 1", "title": "Initialize backend project structure (TypeScript, Express)", "filePath": "backend/", "userStory": null, "parallel": false, "description": "Scaffold backend, migrations, and connection config" },
    { "id": "T017", "phase": "Phase 1", "title": "Initialize frontend React project (Vite, TS)", "filePath": "frontend/", "userStory": null, "parallel": true, "description": "Scaffold frontend, routing, i18n config" },

    { "id": "T018", "phase": "Phase 2A", "title": "Implement User model with CURP primary identifier", "filePath": "backend/src/models/User.ts", "userStory": "US1", "parallel": false, "description": "User schema: id, email, password_hash, CURP, name, phone, assigned_doctor" },
    { "id": "T019", "phase": "Phase 2A", "title": "Implement CURP validation utility", "filePath": "backend/src/utils/validation.ts", "userStory": "US1", "parallel": false, "description": "Server-side CURP regex and Spanish error messages" },
    { "id": "T020", "phase": "Phase 2A", "title": "Implement AuthService registration workflow", "filePath": "backend/src/services/AuthService.ts", "userStory": "US1", "parallel": false, "description": "Registration flow with hashing and CURP/email checks" },
    { "id": "T021", "phase": "Phase 2A", "title": "Implement JWT token generation and verification", "filePath": "backend/src/utils/jwt.ts", "userStory": "US1", "parallel": false, "description": "Token lifecycle, refresh strategy" },
    { "id": "T022", "phase": "Phase 2A", "title": "Create auth API endpoints", "filePath": "backend/src/api/routes/auth.routes.ts", "userStory": "US1", "parallel": false, "description": "Register/login/logout/password-reset endpoints" },
    { "id": "T023", "phase": "Phase 2A", "title": "Implement authentication middleware", "filePath": "backend/src/api/middleware/auth.middleware.ts", "userStory": "US1", "parallel": false, "description": "JWT verification and request context setup" },
    { "id": "T024", "phase": "Phase 2A", "title": "Create Register component with CURP field", "filePath": "frontend/src/components/Auth/Register.tsx", "userStory": "US1", "parallel": true, "description": "Spanish registration form with client-side CURP validation" },
    { "id": "T025", "phase": "Phase 2A", "title": "Create Login component with credential form", "filePath": "frontend/src/components/Auth/Login.tsx", "userStory": "US1", "parallel": true, "description": "Spanish login form and token storage" },
    { "id": "T026", "phase": "Phase 2A", "title": "Create useAuth custom hook", "filePath": "frontend/src/hooks/useAuth.ts", "userStory": "US1", "parallel": true, "description": "Auth state, token management, protected route wrapper" },
    { "id": "T027", "phase": "Phase 2A", "title": "Implement registration integration test", "filePath": "backend/tests/integration/auth.integration.test.ts", "userStory": "US1", "parallel": false, "description": "Integration tests for registration and CURP handling" },
    { "id": "T028", "phase": "Phase 2A", "title": "Implement login integration test with JWT validation", "filePath": "backend/tests/integration/auth.integration.test.ts", "userStory": "US1", "parallel": false, "description": "Login and token lifecycle tests" },
    { "id": "T029", "phase": "Phase 2A", "title": "Create Cypress E2E for registration→login→dashboard", "filePath": "frontend/tests/e2e/registration.cy.ts", "userStory": "US1", "parallel": true, "description": "E2E happy-path for auth and dashboard access" },

    { "id": "T030", "phase": "Phase 2A", "title": "Implement Appointment model with urgency & status", "filePath": "backend/src/models/Appointment.ts", "userStory": "US2", "parallel": false, "description": "Appointment schema with urgency level and reference number" },
    { "id": "T031", "phase": "Phase 2A", "title": "Implement DoctorSchedule model for slots", "filePath": "backend/src/models/DoctorSchedule.ts", "userStory": "US2", "parallel": false, "description": "Doctor availability and booked slots" },
    { "id": "T032", "phase": "Phase 2A", "title": "Implement UrgencyAssessment model for triage responses", "filePath": "backend/src/models/UrgencyAssessment.ts", "userStory": "US2", "parallel": true, "description": "Store 5-question responses and computed urgency" },
    { "id": "T033", "phase": "Phase 2A", "title": "Implement TriageService (5-question algorithm)", "filePath": "backend/src/services/TriageService.ts", "userStory": "US2", "parallel": false, "description": "Compute urgency and emergency flags; persist assessment" },
    { "id": "T034", "phase": "Phase 2A", "title": "Implement AppointmentService for booking & filtering", "filePath": "backend/src/services/AppointmentService.ts", "userStory": "US2", "parallel": true, "description": "Create appointments, prevent double-booking, generate reference" },
    { "id": "T035", "phase": "Phase 2A", "title": "Implement SchedulingService for automatic assignment", "filePath": "backend/src/services/SchedulingService.ts", "userStory": "US2", "parallel": true, "description": "Assign slots by urgency and load-balance across doctors" },
    { "id": "T036", "phase": "Phase 2A", "title": "Create appointment API endpoints", "filePath": "backend/src/api/routes/appointments.routes.ts", "userStory": "US2", "parallel": true, "description": "GET/POST/PUT /appointments endpoints with filters" },
    { "id": "T037", "phase": "Phase 2A", "title": "Create BookAppointment component with filters", "filePath": "frontend/src/components/Appointments/BookAppointment.tsx", "userStory": "US2", "parallel": true, "description": "UI for selecting doctor/date and starting triage" },
    { "id": "T038", "phase": "Phase 2A", "title": "Create TriageQuestionnaire component (5 questions)", "filePath": "frontend/src/components/Triage/TriageQuestionnaire.tsx", "userStory": "US2", "parallel": true, "description": "Client-side questionnaire and urgency display" },
    { "id": "T039", "phase": "Phase 2A", "title": "Implement appointment confirmation email service", "filePath": "backend/src/services/AppointmentService.ts", "userStory": "US2", "parallel": false, "description": "Send Spanish confirmation email within SLA" },
    { "id": "T040", "phase": "Phase 2A", "title": "Create AppointmentList component showing booked appts", "filePath": "frontend/src/components/Appointments/AppointmentList.tsx", "userStory": "US2", "parallel": true, "description": "User's upcoming appointments list UI" },
    { "id": "T041", "phase": "Phase 2A", "title": "Implement appointment booking integration test", "filePath": "backend/tests/integration/appointments.integration.test.ts", "userStory": "US2", "parallel": false, "description": "Integration test for booking + triage + confirmation" },
    { "id": "T042", "phase": "Phase 2A", "title": "Create Cypress test for appointment booking workflow", "filePath": "frontend/tests/e2e/appointment-booking.cy.ts", "userStory": "US2", "parallel": true, "description": "E2E test exercising booking flow" },

    { "id": "T043", "phase": "Phase 2A", "title": "Implement Doctor model with qualifications & ratings", "filePath": "backend/src/models/Doctor.ts", "userStory": "US3", "parallel": false, "description": "Doctor entity with qualifications and availability" },
    { "id": "T044", "phase": "Phase 2A", "title": "Implement DoctorService for directory & availability", "filePath": "backend/src/services/DoctorService.ts", "userStory": "US3", "parallel": false, "description": "Directory and availability queries" },
    { "id": "T045", "phase": "Phase 2A", "title": "Create doctor API endpoints (list/detail/search)", "filePath": "backend/src/api/routes/doctors.routes.ts", "userStory": "US3", "parallel": true, "description": "Endpoints to retrieve doctor info and availability" },
    { "id": "T046", "phase": "Phase 2A", "title": "Create DoctorDirectory component showing all doctors", "filePath": "frontend/src/components/Doctors/DoctorDirectory.tsx", "userStory": "US3", "parallel": true, "description": "List with filter UI, ratings, availability" },
    { "id": "T047", "phase": "Phase 2A", "title": "Create DoctorFilter component for specialty", "filePath": "frontend/src/components/Doctors/DoctorFilter.tsx", "userStory": "US3", "parallel": true, "description": "Filtering controls for directory" },
    { "id": "T048", "phase": "Phase 2A", "title": "Create DoctorProfile component with qualifications", "filePath": "frontend/src/components/Doctors/DoctorProfile.tsx", "userStory": "US3", "parallel": true, "description": "Profile view with availability and book button" },
    { "id": "T049", "phase": "Phase 2A", "title": "Implement doctor directory integration test", "filePath": "backend/tests/integration/doctors.integration.test.ts", "userStory": "US3", "parallel": false, "description": "Integration test for filtering and detail endpoints" },
    { "id": "T050", "phase": "Phase 2A", "title": "Create Cypress test for doctor directory and filtering", "filePath": "frontend/tests/e2e/doctor-selection.cy.ts", "userStory": "US3", "parallel": true, "description": "E2E test for selecting and booking via doctor profile" },

    { "id": "T050A", "phase": "Phase 2B (Emergency)", "title": "Implement emergency case detection in TriageService", "filePath": "backend/src/services/TriageService.ts", "userStory": "Emergency", "parallel": false, "description": "Detect trauma/chest pain and flag EMERGENCY" },
    { "id": "T050B", "phase": "Phase 2B (Emergency)", "title": "Create emergency escalation API endpoint", "filePath": "backend/src/api/routes/appointments.routes.ts", "userStory": "Emergency", "parallel": false, "description": "POST /appointments/emergency-escalate to notify on-call/911 stub" },
    { "id": "T050C", "phase": "Phase 2B (Emergency)", "title": "Implement on-call physician notification service", "filePath": "backend/src/services/OnCallService.ts", "userStory": "Emergency", "parallel": false, "description": "Send emergency notifications to on-call team" },
    { "id": "T050D", "phase": "Phase 2B (Emergency)", "title": "Create 911 dispatch integration stub", "filePath": "backend/src/services/DispatchService.ts", "userStory": "Emergency", "parallel": false, "description": "Stub for 911 integration that logs recommended dispatch info" },
    { "id": "T050E", "phase": "Phase 2B (Emergency)", "title": "Implement emergency escalation integration test", "filePath": "backend/tests/integration/emergency.integration.test.ts", "userStory": "Emergency", "parallel": false, "description": "Test detection and escalation audit logging" },
    { "id": "T050F", "phase": "Phase 2B (Emergency)", "title": "Create emergency case UI notification", "filePath": "frontend/src/components/Common/EmergencyNotification.tsx", "userStory": "Emergency", "parallel": true, "description": "Show emergency escalation status in Spanish to user" },

    { "id": "T051", "phase": "Phase 2B", "title": "Enhance SchedulingService with urgency-based time window assignment", "filePath": "backend/src/services/SchedulingService.ts", "userStory": "US4", "parallel": false, "description": "Top-3 alternative slots and urgency windows" },
    { "id": "T052", "phase": "Phase 2B", "title": "Create appointment proposal UI showing automatic assignment", "filePath": "frontend/src/components/Appointments/AppointmentProposal.tsx", "userStory": "US4", "parallel": true, "description": "Show recommended time and alternatives" },
    { "id": "T053", "phase": "Phase 2B", "title": "Implement assignment verification integration test", "filePath": "backend/tests/integration/scheduling.integration.test.ts", "userStory": "US4", "parallel": false, "description": "Verify urgency-window assignments for High/Mid/Low" },

    { "id": "T054", "phase": "Phase 2B", "title": "Add doctor change workflow to AuthService", "filePath": "backend/src/services/AuthService.ts", "userStory": "US5", "parallel": false, "description": "Update preferred doctor and cascade to future appointments" },
    { "id": "T055", "phase": "Phase 2B", "title": "Create DoctorChangeModal component", "filePath": "frontend/src/components/Auth/DoctorChangeModal.tsx", "userStory": "US5", "parallel": true, "description": "Frontend modal to change assigned doctor" },
    { "id": "T056", "phase": "Phase 2B", "title": "Create doctor change API endpoint", "filePath": "backend/src/api/routes/auth.routes.ts", "userStory": "US5", "parallel": false, "description": "PUT /user/doctor to update preferred doctor" },
    { "id": "T057", "phase": "Phase 2B", "title": "Add doctor change section to user profile", "filePath": "frontend/src/pages/DashboardPage.tsx", "userStory": "US5", "parallel": true, "description": "Profile UI integration for doctor change workflow" },

    { "id": "T058", "phase": "Phase 2B", "title": "Implement MedicineRequest model and service", "filePath": "backend/src/models/MedicineRequest.ts", "userStory": "US6", "parallel": false, "description": "Medicine request storage and status tracking" },
    { "id": "T059", "phase": "Phase 2B", "title": "Create medicine request API endpoints", "filePath": "backend/src/api/routes/requests.routes.ts", "userStory": "US6", "parallel": true, "description": "POST/GET/PUT endpoints for medicine requests" },
    { "id": "T060", "phase": "Phase 2B", "title": "Create MedicineRequestForm component", "filePath": "frontend/src/components/Requests/MedicineRequest.tsx", "userStory": "US6", "parallel": true, "description": "Frontend form to submit medicine requests" },
    { "id": "T061", "phase": "Phase 2B", "title": "Create doctor medicine request queue endpoint", "filePath": "backend/src/api/routes/requests.routes.ts", "userStory": "US6", "parallel": false, "description": "GET /medicine-requests/pending for doctors" },
    { "id": "T062", "phase": "Phase 2B", "title": "Create MedicineRequestList component", "filePath": "frontend/src/components/Requests/MedicineRequestList.tsx", "userStory": "US6", "parallel": true, "description": "Display user's request history and statuses" },

    { "id": "T063", "phase": "Phase 2B", "title": "Implement appointment history query in AppointmentService", "filePath": "backend/src/services/AppointmentService.ts", "userStory": "US7", "parallel": false, "description": "Query completed appointments and support export" },
    { "id": "T064", "phase": "Phase 2B", "title": "Create appointment history API endpoint", "filePath": "backend/src/api/routes/appointments.routes.ts", "userStory": "US7", "parallel": true, "description": "GET /appointments/history and export endpoint" },
    { "id": "T065", "phase": "Phase 2B", "title": "Create AppointmentHistory component", "filePath": "frontend/src/components/Appointments/AppointmentHistory.tsx", "userStory": "US7", "parallel": true, "description": "Frontend list for past appointments" },
    { "id": "T066", "phase": "Phase 2B", "title": "Implement PDF export functionality for appointment history", "filePath": "frontend/src/utils/pdfExport.ts", "userStory": "US7", "parallel": true, "description": "Generate PDF with masked CURP and appointment list" },
    { "id": "T067", "phase": "Phase 2B", "title": "Implement appointment history integration test", "filePath": "backend/tests/integration/appointments.integration.test.ts", "userStory": "US7", "parallel": false, "description": "Verify history query and PDF export correctness" },

    { "id": "T068", "phase": "Phase 2B", "title": "Implement SickLeaveRequest model and service", "filePath": "backend/src/models/SickLeaveRequest.ts", "userStory": "US8", "parallel": false, "description": "Sick leave request storage and certificate generation" },
    { "id": "T069", "phase": "Phase 2B", "title": "Create sick leave request API endpoints", "filePath": "backend/src/api/routes/requests.routes.ts", "userStory": "US8", "parallel": true, "description": "POST/GET/PUT endpoints for sick leave requests" },
    { "id": "T070", "phase": "Phase 2B", "title": "Create SickLeaveRequestForm component", "filePath": "frontend/src/components/Requests/SickLeaveRequest.tsx", "userStory": "US8", "parallel": true, "description": "Frontend form for sick leave requests" },
    { "id": "T071", "phase": "Phase 2B", "title": "Implement IMSS sick leave certificate generation", "filePath": "backend/src/services/SickLeaveService.ts", "userStory": "US8", "parallel": false, "description": "Generate IMSS-formatted PDF certificate on approval" },
    { "id": "T072", "phase": "Phase 2B", "title": "Create SickLeaveList component with download", "filePath": "frontend/src/components/Requests/SickLeaveRequest.tsx", "userStory": "US8", "parallel": true, "description": "List approved requests and enable certificate download" },
    { "id": "T073", "phase": "Phase 2B", "title": "Implement sick leave request integration test", "filePath": "backend/tests/integration/requests.integration.test.ts", "userStory": "US8", "parallel": false, "description": "Test certificate generation flow" },

    { "id": "T074", "phase": "Phase 2C", "title": "Implement sick leave request search and filtering", "filePath": "backend/src/services/SickLeaveService.ts", "userStory": "US9", "parallel": false, "description": "Filtering by date range and bulk download support" },
    { "id": "T075", "phase": "Phase 2C", "title": "Create advanced SickLeaveFilter component", "filePath": "frontend/src/components/Requests/SickLeaveFilter.tsx", "userStory": "US9", "parallel": true, "description": "Date range picker and bulk download UI" },
    { "id": "T076", "phase": "Phase 2C", "title": "Implement bulk certificate download functionality", "filePath": "frontend/src/utils/bulkExport.ts", "userStory": "US9", "parallel": true, "description": "Generate ZIP of multiple certificates for download" },

    { "id": "T077", "phase": "Phase 3", "title": "Implement structured JSON logging across backend services", "filePath": "backend/src/utils/logger.ts", "userStory": null, "parallel": false, "description": "Winston/Pino logging with CURP masking and request context" },
    { "id": "T078", "phase": "Phase 3", "title": "Implement error boundary components and centralized error handling", "filePath": "frontend/src/components/Common/ErrorBoundary.tsx", "userStory": null, "parallel": false, "description": "Catch and log errors, Spanish messages, avoid exposing sensitive data" },
    { "id": "T079", "phase": "Phase 3", "title": "Implement performance testing and load testing for 500 concurrent users", "filePath": "backend/tests/performance/", "userStory": null, "parallel": false, "description": "k6/Artillery scripts for booking workflow and Redis optimization" },
    { "id": "T079A", "phase": "Phase 3", "title": "Configure business metric alerting thresholds", "filePath": "backend/src/monitoring/alerts.ts", "userStory": null, "parallel": true, "description": "Define alerts for triage accuracy, doctor response, email SLA, uptime" }
  ]
}
